<!DOCTYPE html>
{% load staticfiles %}
<html>

    <head>
        <title>Tweet Coding</title>
    </head>

    <body>
      {% if user.is_authenticated %}
        <h1>Hello {{ user.username }}</h1>
        <h2>{{ coding_message}}</h2>
        <h2>{{ progress_message}}</h2>
        <h3>{{ error }}</h3>
        {% if tweets %}

          <ul>
              {% for tweet in tweets %}
              <li>{{ tweet.tweet_id }}</li>
              <li>{{ tweet.timestamp }}</li>
              <li>{{ tweet.user_name }}</li>
              <li>{{ tweet.tweet_text }}</li>
              {% endfor %}
          </ul>

          <form id="tweet_form" method="post" action="/coding/index/">

              {% csrf_token %}
              {% for hidden in form.hidden_fields %}
                  {{ hidden }}
              {% endfor %}
              {% for tweet in tweets %}
              <input id="tweet_id" name="tweet_id" type="hidden" value="{{ tweet.tweet_id }}" />
              {% endfor %}
              {% for field in form.visible_fields %}
                  {{ field.errors }}
                  {{ field.help_text }}
                  {{ field }}
              {% endfor %}

              {% for category in categories %}
                <h3>{{ category }}</h3>
                {% for feature in category.features.all %}
                <input type="radio" name="category_{{ category.pk }}" value="{{ feature.pk }}">{{ feature }}<br>
                {% endfor%}
              {% endfor %}

              <input type="submit" name="submit" value="Code" />
          </form>

        {% else %}
          <strong>There are no tweets present.</strong> <br />
        {% endif %}

      {% else %}
        <h1>How did you get here? Something has gone very wrong</h1>
      {% endif %}

        {% if user.is_authenticated %}
        <a href="/coding/logout/">Logout</a><br />
        {% else %}
        <a href="/rango/register/">Register Here</a><br />
        <a href="/rango/login/">Login</a><br />
        {% endif %}
    </body>

</html>
