{% extends 'base.html' %}
{% load staticfiles %}

{% block body_block %}
      {% if user.is_authenticated %}
        <h1>Hello {{ user.username }}</h1>
        <h2>{{ coding_message}}</h2>
        <h2>{{ progress_message}}</h2>
        <h3>{{ error }}</h3>
        {% if tweets %}

        {{ embedded_tweet |safe }}

          <form id="tweet_form" method="post" action="/coding/index/">

              {% csrf_token %}
              {% for hidden in form.hidden_fields %}
                  {{ hidden }}
              {% endfor %}
              {% for tweet in tweets %}
              <input id="tweet_id" name="tweet_id" type="hidden" value="{{ tweet.tweet_id }}" />
              {% endfor %}
              {% for field in form.visible_fields %}
                  {{ field.errors }}
                  {{ field.help_text }}
                  {{ field }}
              {% endfor %}

              {% if replies %}
              <h3>This tweet mentions</h3>
                {% for at in replies%}
                <a href="{{ at }}">{{ at }}</a><br />
                {% endfor %}
              {% endif %}

              {% for category in categories %}
                <h3>{{ category }}</h3>
                {% for feature in category.features.all %}
                <input type="radio" name="category_{{ category.pk }}" value="{{ feature.pk }}">{{ feature }}<br>
                {% endfor%}
              {% endfor %}

              <button class="btn btn-danger" type="reset">Reset</button>
              <input type="submit" name="submit" value="Code" />
          </form>

        {% else %}
          <strong>There are no tweets.</strong> <br />
        {% endif %}

      {% else %}
        <h1>How did you get here? Something has gone very wrong</h1>
      {% endif %}

{% endblock %}
